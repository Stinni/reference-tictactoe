version: '2'
services:
  server:
    image: stinni/tictactoe:${GIT_COMMIT}
    environment:
      - 'PGHOST=pg2'
      - 'PGPORT=5432'
      - 'PORT=3000'
      - 'NODE_ENV=production'
    ports:
      - '8080:8080'
      - '80:3000'
    links:
      - 'pg2'
    depends_on:
      - 'pg2'
  pg2:
    image: postgres
    environment:
      - 'POSTGRES_PASSWORD=mysecretpassword'
    ports:
      - '5432:5432'